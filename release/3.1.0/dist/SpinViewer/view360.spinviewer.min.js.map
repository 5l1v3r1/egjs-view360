{"version":3,"file":"SpinViewer/view360.spinviewer.min.js","sources":["webpack://eg.view360/SpinViewer/view360.spinviewer.min.js"],"sourcesContent":["!function webpackUniversalModuleDefinition(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):\"function\"==typeof define&&define.amd?define(\"view360\",[\"@egjs/component\",\"@egjs/axes\"],t):\"object\"==typeof exports?exports.view360=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):(e.eg=e.eg||{},e.eg.view360=t(e.eg.Component,e.eg.Axes))}(window,function(e,t){return function(e){var t={};function __webpack_require__(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,o){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},__webpack_require__.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)__webpack_require__.d(o,r,function(t){return e[t]}.bind(null,r));return o},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=43)}({3:function(t,o){t.exports=e},4:function(e,o){e.exports=t},43:function(e,t,o){\"use strict\";t.__esModule=!0,t.VERSION=t.SpriteImage=t.SpinViewer=void 0;var r=_interopRequireDefault(o(44)),n=_interopRequireDefault(o(45));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.SpinViewer=r.default,t.SpriteImage=n.default,t.VERSION=\"3.1.0\",r.default.VERSION=\"3.1.0\",n.default.VERSION=\"3.1.0\"},44:function(e,t,o){\"use strict\";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n=_interopRequireDefault(o(3)),i=o(4),a=_interopRequireDefault(i),u=_interopRequireDefault(o(45));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=.21,s=function(e){function SpinViewer(t,o){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,SpinViewer);var n=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this));n._el=t;var s=r({},o),_=s.colCount||1,c=s.rowCount||1;return n._scale=s.scale||1,n._panScale=n._scale*l,n._frameCount=_*c,n._sprites=new u.default(t,s).on({load:function load(e){n.trigger(\"load\",e)},imageError:function imageError(e){n.trigger(\"imageError\",{imageUrl:e.imageUrl})}}),n._panInput=new i.PanInput(n._el,{scale:[n._panScale,n._panScale]}),n._axes=new a.default({angle:{range:[0,359],circular:!0}}).on({change:function change(e){var t=Math.floor(e.pos.angle/(360/n._frameCount)),o=n._frameCount-t-1;n._sprites.setFrameIndex(o),n.trigger(\"change\",{frameIndex:o,colRow:n._sprites.getColRow(),angle:e.pos.angle})},animationEnd:function animationEnd(e){n.trigger(\"animationEnd\",{isTrusted:e.isTrusted})}}),n._axes.connect(\"angle\",n._panInput),n}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SpinViewer,e),SpinViewer.prototype.setScale=function setScale(e){return isNaN(e)||e<0?this:(this._scale=e,this._panScale=e*l,this._panInput.options.scale=[this._panScale,this._panScale],this)},SpinViewer.prototype.getScale=function getScale(){return this._scale},SpinViewer.prototype.spinBy=function spinBy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{duration:0};return this._axes.setBy({angle:e},t.duration),this},SpinViewer.prototype.spinTo=function spinTo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{duration:0};return this._axes.setTo({angle:e},t.duration),this},SpinViewer.prototype.getAngle=function getAngle(){return this._axes.get().angle||0},SpinViewer}(n.default);t.default=s},45:function(e,t,o){\"use strict\";t.__esModule=!0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o(3)),n=o(5);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var i=function(e){function SpriteImage(t,o){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,SpriteImage);var r=_possibleConstructorReturn(this,e.call(this)),n=o||{};return r._el=t,r._rowCount=n.rowCount||1,r._colCount=n.colCount||1,r._totalCount=r._rowCount*r._colCount,r._width=n.width||\"auto\",r._height=n.height||\"auto\",r._autoHeight=null!=n.autoHeight?n.autoHeight:\"true\",r._colRow=[0,0],n.colRow?r._colRow=n.colRow:n.frameIndex&&r.setFrameIndex(n.frameIndex),r._el.style.width=SpriteImage._getSizeString(r._width),r._el.style.height=SpriteImage._getSizeString(r._height),n.imageUrl?(r._image=new Image,r._image.onload=function(){r._bg=SpriteImage._createBgDiv(r._image,r._rowCount,r._colCount,r._autoHeight),r._el.appendChild(r._bg),r.setColRow(r._colRow[0],r._colRow[1]),r.trigger(\"load\",{target:r._el,bgElement:r._bg}),r._autoPlayReservedInfo&&(r.play(r._autoPlayReservedInfo),r._autoPlayReservedInfo=null)},r._image.onerror=function(e){r.trigger(\"imageError\",{imageUrl:n.imageUrl})},r._image.src=n.imageUrl,r):(setTimeout(function(){r.trigger(\"imageError\",{imageUrl:n.imageUrl})},0),_possibleConstructorReturn(r))}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SpriteImage,e),SpriteImage._createBgDiv=function _createBgDiv(e,t,o,r){var i=document.createElement(\"div\");i.style.position=\"relative\",i.style.overflow=\"hidden\",e.style.position=\"absolute\",e.style.width=100*o+\"%\",e.style.height=100*t+\"%\",e.ondragstart=function(){return!1},n.SUPPORT_WILLCHANGE&&(e.style.willChange=\"transform\"),i.appendChild(e);var a=e.width/o,u=e.height/t;if(r){var l=u/a;i.style.paddingBottom=100*l+\"%\"}else i.style.height=\"100%\";return i},SpriteImage.prototype.setFrameIndex=function setFrameIndex(e){var t=this.toColRow(e);this.setColRow(t[0],t[1])},SpriteImage.prototype.getFrameIndex=function getFrameIndex(){return this._colRow[1]*this._colCount+this._colRow[0]},SpriteImage.prototype.setColRow=function setColRow(e,t){t>this._rowCount-1||e>this._colCount-1||(this._image&&n.TRANSFORM&&(this._image.style[n.TRANSFORM]=\"translate(\"+-e/this._colCount*100+\"%, \"+-t/this._rowCount*100+\"%)\"),this._colRow=[e,t])},SpriteImage.prototype.getColRow=function getColRow(){return this._colRow},SpriteImage._getSizeString=function _getSizeString(e){return\"number\"==typeof e?e+\"px\":e},SpriteImage.prototype.stop=function stop(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null)},SpriteImage.prototype.play=function play(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3/this._totalCount,playCount:0},o=t.interval,r=t.playCount;if(this._bg){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null);var n=this.getFrameIndex(),i=0,a=0;this._autoPlayTimer=setInterval(function(){n%=e._totalCount;var t=e.toColRow(n);e.setColRow(t[0],t[1]),n++,++a===e._totalCount&&(a=0,i++),r>0&&i===r&&clearInterval(e._autoPlayTimer)},o)}else this._autoPlayReservedInfo={interval:o,playCount:r}},SpriteImage.prototype.toColRow=function toColRow(e){var t=this._colCount,o=this._rowCount;return e<0?[0,0]:e>=this._totalCount?[t-1,o-1]:[e%t,Math.floor(e/t)]},SpriteImage}(r.default);t.default=i},5:function(e,t,o){\"use strict\";t.__esModule=!0,t.devicePixelRatio=t.DeviceMotionEvent=t.SUPPORT_WILLCHANGE=t.SUPPORT_DEVICEMOTION=t.SUPPORT_TOUCH=t.TRANSFORM=t.userAgent=t.getComputedStyle=t.Float32Array=void 0;var r=o(6);r.window.Float32Array=void 0!==r.window.Float32Array?r.window.Float32Array:r.window.Array;var n=r.window.Float32Array,i=r.window.getComputedStyle,a=r.window.navigator.userAgent,u=\"ontouchstart\"in r.window,l=\"ondevicemotion\"in r.window,s=r.window.DeviceMotionEvent,_=r.window.devicePixelRatio,c=function(){for(var e=r.document.documentElement.style,t=[\"transform\",\"webkitTransform\",\"msTransform\",\"mozTransform\"],o=0,n=t.length;o<n;o++)if(t[o]in e)return t[o];return\"\"}(),p=r.window.CSS&&r.window.CSS.supports&&r.window.CSS.supports(\"will-change\",\"transform\");t.Float32Array=n,t.getComputedStyle=i,t.userAgent=a,t.TRANSFORM=c,t.SUPPORT_TOUCH=u,t.SUPPORT_DEVICEMOTION=l,t.SUPPORT_WILLCHANGE=p,t.DeviceMotionEvent=s,t.devicePixelRatio=_},6:function(e,t,o){\"use strict\";t.__esModule=!0;var r=\"undefined\"!=typeof window&&window.Math===Math?window:\"undefined\"!=typeof self&&self.Math===Math?self:Function(\"return this\")(),n=r.document;t.window=r,t.document=n}})});"],"mappings":";;;;;;;;;AAAA","sourceRoot":""}